{% extends 'base.html.twig' %}

{% block title %}Hello ArticleController!{% endblock %}

{% block body %}

        {% for message in app.flashes('success') %}
            <div class="alert alert-success">
                {{ message }}
            </div>
        {% endfor %}

<h1>Liste des Articles</h1>
{% if articles %}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Titre</th>
            <th>Publi√©</th>
            <th>Auteur</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for article in articles %}
        <tr>
            <td>{{article.id}}</td>
            <td>{{article.titre}}</td>
            <td>
                {% if article.visible is same as(true) %}
                    oui
                {% else %}
                    non
                {% endif %}
            </td>
            <td>{{article.auteur}}</td>
            <td>
                <a href="/articles/show/{{article.id}}">Show</a>
                <a href="/articles/edit/{{article.id}}">Edit</a>
                <a href="/articles/delete/{{article.id}}" class="confirm">Delete</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

{% block javascripts %}
<script type="text/javascript">
    {# Comfirm Delete #}
    function confirmClick(e) {
        const message = 'Are you sure that you want to delete this article?';
        action = confirm(message) ? true : e.preventDefault();
    }
    const confirmLinks = document.getElementsByClassName('confirm');
    for (let i = 0, length = confirmLinks.length; i < length; i++) {
        confirmLinks[i].addEventListener('click', confirmClick);
    }
</script>
{% endblock %}

{% endblock %}
